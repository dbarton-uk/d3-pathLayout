<!DOCTYPE html>
<meta charset="utf-8">

<style>
    .node {
        fill: blue;
        text-anchor: middle;
    }

    .path {
        stroke: lightblue;
        stroke-dasharray: 2;
        fill: none;
    }
</style>

<body>
    <script src="http://d3js.org/d3.v4.min.js"></script>
    <script src="../build/d3-pathLayout.js"></script>

    <script>

        var outerWidth  = 960,
            outerHeight = 500;

        var margin = {
            top   : 20,
            right : 10,
            bottom: 20,
            left  : 10
        };

        var width  = outerWidth - margin.left - margin.right,
            height = outerHeight - margin.top - margin.bottom;

        var svg = d3.select("body")
                    .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


        var text  = "Hello D3 World!".split('');
        var nodes = [];

        text.forEach(function (t) {
            nodes.push({letter: t});
        });

        var horizontalPath = d3.path();
        horizontalPath.moveTo(200, 200);
        horizontalPath.lineTo(400, 200);

        var verticalPath = d3.path();
        verticalPath.moveTo(300, 100);
        verticalPath.lineTo(300, 300);

        var diagonalPath = d3.path();
        diagonalPath.moveTo(200, 100);
        diagonalPath.lineTo(400, 300);

        var circle = d3.path();
        circle.arc(300, 200, 50, Math.PI, Math.PI * 3);

        var cubicBezier1 = d3.path();
        cubicBezier1.moveTo(200, 200);
        cubicBezier1.bezierCurveTo(250, 100, 350, 300, 400, 200);

        var cubicBezier2 = d3.path();
        cubicBezier2.moveTo(200, 200);
        cubicBezier2.bezierCurveTo(250, 300, 350, 100, 400, 200);

        var paths = [
            horizontalPath,
            verticalPath,
            diagonalPath,
            circle,
            cubicBezier1,
            cubicBezier2
        ];

        svg.selectAll(".path")
           .data(paths)
           .enter()
           .append("path")
           .attr("d", function (d) {
               return d;
           })
           .attr("class", "path");

        svg.nodes = svg.selectAll('.node')
                       .data(nodes)
                       .enter()
                       .append("text")
                       .text(function (d) {
                           return d.letter;
                       })
                       .attr("class", "node")
                       .transition()
                       .on("start", function repeat() {

                           var transition = d3.active(this);

                           paths.forEach(function (p) {
                               transition = transition.call(transitionToPath, p).transition();
                           });
                           transition.on("start", repeat);
                       });

        function transitionToPath(transition, path) {

            d3.pathLayout({
                nodes: nodes,
                path : path
            });

            transition.duration(2000)
                      .attr("x", function (d) {
                          return d.x;
                      })
                      .attr("y", function (d) {
                          return d.y;
                      });
        }

    </script>
</body>