<!DOCTYPE html>
<meta charset="utf-8">

<style>
    html, body {
        height: 100%;
        margin: 0;
    }

    #selection {
        height: 100%;
        width: 400px;
        background-color: red;
        float: left;
    }

    #content {
        height: 100%;
        background-color: blue;
    }

    .node {
        alignment-baseline: after-edge;
        text-anchor: middle;
    }

    .path {
        stroke: grey;
        stroke-dasharray: 5;

    }

</style>

<body>
    <script src="http://d3js.org/d3.v4.min.js"></script>
    <script src="../build/d3-pathLayout.js"></script>


    <script>

        var outerWidth  = 960,
            outerHeight = 500;

        var margin = {
            top   : 20,
            right : 10,
            bottom: 20,
            left  : 10
        };

        var width  = outerWidth - margin.left - margin.right,
            height = outerHeight - margin.top - margin.bottom;

        var svg = d3.select("body")
                    .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


        var text  = "Hello D3 World!".split('');
        var nodes = [];

        text.forEach(function (t) {
            nodes.push({letter: t});
        });


        svg.g = svg.append("g")
                   .attr("transform", "translate(100, 200)");

        svg.nodes = svg.g.selectAll('.node')
                       .data(nodes)
                       .enter()
                       .append("text")
                       .text(function (d) {
                           return d.letter;
                       })
                       .attr("class", "node");

        svg.g.path = svg.append("path")
                      .attr("class", "path");

        var horizontalPath = d3.path();

        horizontalPath.moveTo(0, 0);
        horizontalPath.lineTo(200, 0);

        var verticalPath = d3.path();
        verticalPath.moveTo(100, 100);
        verticalPath.lineTo(100, 300);

        var circle = d3.arc()
                       .innerRadius(0)
                       .outerRadius(50)
                       .startAngle(0)
                       .endAngle(Math.PI / 2)();

        svg.nodes
           .transition()
           .on("start", function repeat() {

               d3.active(this)
                 .call(transitionToPath, horizontalPath)
                 .transition()
                 .call(transitionToPath, verticalPath)
                 .transition()
                 .call(transitionToPath, circle)
                 .transition()
                 .on("start", repeat)
           });

        function transitionToPath(transition, path) {

            d3.pathLayout({
                nodes: nodes,
                path : path
            });

            transition
                    .duration(2000)
                    .attr("x", function (d) {
                        return d.x;
                    })
                    .attr("y", function (d) {
                        return d.y;
                    });

        }

    </script>
</body>